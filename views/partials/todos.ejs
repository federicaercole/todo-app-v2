<% if (todos.length>0) { %>
    <% dates.forEach( date=> { %>
        <section>
            <h2>
                <%= date.toLocaleDateString() %>
            </h2>
            <% const todosByDate=todos.filter(todo=>todo.due_date.toString()===date.toString())%>
                <% todosByDate.forEach( todo=> { %>
                    <article>
                        <label for="todo-<%= todo.todo_id %>" class="visually-hidden">Mark "<%= todo.title %>" todo as
                                done</label>
                        <input data-id="<%= todo.todo_id %>" id="todo-<%= todo.todo_id %>" type="checkbox"
                            <%=todo.done===0 ? "" : "checked" %>>
                        <div>
                            <h3>
                                <%= todo.title %>
                            </h3>
                            <h4>
                                <%= todo.priority %>
                            </h4>
                        </div>
                        <a href="/todo/<%= todo.todo_id%>/edit">Edit <span class="visually-hidden">
                                <%= todo.title %>
                            </span></a>
                        <button type="button" class="delete-todo" data-id="<%= todo.todo_id %>">Delete <span
                                class="visually-hidden">
                                <%= todo.title %>
                            </span></button>
                    </article>
                    <% }) %>
        </section>
        <% }) %>
            <% } else {%>
                <p>No todos here :(</p>
                <%}%>